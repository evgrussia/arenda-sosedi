---
title: "User Flows"
created_by: "UX Agent"
created_at: "2025-02-05"
version: "1.0"
status: "approved"
---

# User Flows — Арендо-Соседи

## Введение

Документ описывает пользовательские потоки (User Flows) для ключевых сценариев платформы Арендо-Соседи. Каждый flow визуализирован в ASCII-формате и содержит описание шагов, точек принятия решений и возможных исходов.

---

## 1. Онбординг и регистрация

### 1.1 Flow: Первый запуск через Telegram

```
┌─────────────────┐
│ Пользователь    │
│ открывает бота  │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│ Telegram        │
│ авторизация     │
│ (автоматически) │
└────────┬────────┘
         │
         ▼
┌─────────────────┐     Нет    ┌─────────────────┐
│ Есть аккаунт?   │───────────▶│ Welcome Screen  │
└────────┬────────┘            │ "Добро пожаловать│
         │ Да                  │ в Арендо-Соседи" │
         │                     └────────┬────────┘
         │                              │
         ▼                              ▼
┌─────────────────┐            ┌─────────────────┐
│ Главный экран   │            │ Запрос имени    │
│ (каталог)       │            │ и фото профиля  │
└─────────────────┘            └────────┬────────┘
                                        │
                                        ▼
                               ┌─────────────────┐
                               │ Запрос геолокации│
                               │ для привязки    │
                               │ к ЖК            │
                               └────────┬────────┘
                                        │
                          ┌─────────────┴─────────────┐
                          │                           │
                          ▼                           ▼
                 ┌─────────────────┐        ┌─────────────────┐
                 │ Геолокация      │        │ Геолокация      │
                 │ разрешена       │        │ отклонена       │
                 └────────┬────────┘        └────────┬────────┘
                          │                          │
                          ▼                          ▼
                 ┌─────────────────┐        ┌─────────────────┐
                 │ ЖК определён    │        │ Ввод адреса     │
                 │ автоматически   │        │ вручную         │
                 └────────┬────────┘        └────────┬────────┘
                          │                          │
                          └──────────┬───────────────┘
                                     │
                                     ▼
                            ┌─────────────────┐
                            │ Подтверждение   │
                            │ адреса          │
                            └────────┬────────┘
                                     │
                                     ▼
                            ┌─────────────────┐
                            │ Onboarding      │
                            │ tutorial (3 шага)│
                            └────────┬────────┘
                                     │
                                     ▼
                            ┌─────────────────┐
                            │ Главный экран   │
                            │ (каталог ЖК)    │
                            └─────────────────┘
```

### 1.2 Шаги онбординга

| Шаг | Экран | Действие пользователя | Результат |
|-----|-------|----------------------|-----------|
| 1 | Welcome | Tap "Начать" | Переход к вводу имени |
| 2 | Профиль | Ввод имени, загрузка фото | Сохранение профиля |
| 3 | Геолокация | Разрешить/ввести адрес | Привязка к ЖК |
| 4 | Tutorial 1 | Просмотр "Как арендовать" | Свайп вправо |
| 5 | Tutorial 2 | Просмотр "Как сдавать" | Свайп вправо |
| 6 | Tutorial 3 | Просмотр "Безопасность" | Tap "Начать" |

---

## 2. Поиск и бронирование (Арендатор)

### 2.1 Flow: Поиск вещи

```
┌─────────────────┐
│ Главный экран   │
│ (каталог)       │
└────────┬────────┘
         │
    ┌────┴────┐
    │         │
    ▼         ▼
┌────────┐  ┌────────────────┐
│ Поиск  │  │ Выбор категории│
│ (текст)│  │ (иконки)       │
└───┬────┘  └───────┬────────┘
    │               │
    └───────┬───────┘
            │
            ▼
   ┌─────────────────┐
   │ Результаты      │
   │ поиска (список) │
   └────────┬────────┘
            │
            ▼
   ┌─────────────────┐
   │ Фильтры?        │
   └────────┬────────┘
            │
     ┌──────┴──────┐
     │             │
     ▼             ▼
┌─────────┐   ┌─────────────┐
│ Нет     │   │ Да          │
│         │   │ - Цена      │
│         │   │ - Даты      │
│         │   │ - Рейтинг   │
└────┬────┘   │ - Расстояние│
     │        └──────┬──────┘
     │               │
     └───────┬───────┘
             │
             ▼
    ┌─────────────────┐
    │ Выбор товара    │
    │ (tap на карточку)│
    └────────┬────────┘
             │
             ▼
    ┌─────────────────┐
    │ Карточка товара │
    │ (детальная)     │
    └─────────────────┘
```

### 2.2 Flow: Бронирование

```
┌─────────────────┐
│ Карточка товара │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│ Просмотр:       │
│ - Фото (галерея)│
│ - Описание      │
│ - Цена/день     │
│ - Залог         │
│ - Рейтинг       │
│ - Профиль owner │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│ Tap "Арендовать"│
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│ Выбор дат       │
│ (календарь)     │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│ Расчёт стоимости│
│ - Аренда: X₽    │
│ - Комиссия: Y₽  │
│ - Залог: Z₽     │
│ ─────────────── │
│ Итого: X+Y+Z₽   │
└────────┬────────┘
         │
         ▼
┌─────────────────┐     ┌─────────────────┐
│ Tap "Оплатить"  │────▶│ YooKassa        │
└─────────────────┘     │ Payment Widget  │
                        └────────┬────────┘
                                 │
                        ┌────────┴────────┐
                        │                 │
                        ▼                 ▼
               ┌─────────────┐    ┌─────────────┐
               │ Успех       │    │ Ошибка      │
               └──────┬──────┘    └──────┬──────┘
                      │                  │
                      ▼                  ▼
               ┌─────────────┐    ┌─────────────┐
               │ Запрос      │    │ Retry /     │
               │ отправлен   │    │ Изменить    │
               │ владельцу   │    │ способ      │
               └──────┬──────┘    └─────────────┘
                      │
                      ▼
               ┌─────────────┐
               │ Ожидание    │
               │ подтверждения│
               │ (до 24ч)    │
               └──────┬──────┘
                      │
             ┌────────┴────────┐
             │                 │
             ▼                 ▼
      ┌─────────────┐   ┌─────────────┐
      │ Подтверждено│   │ Отклонено   │
      └──────┬──────┘   └──────┬──────┘
             │                 │
             ▼                 ▼
      ┌─────────────┐   ┌─────────────┐
      │ Push + Chat │   │ Возврат 100%│
      │ "Согласуйте │   │ Push "К сож.│
      │ передачу"   │   │ отклонено"  │
      └─────────────┘   └─────────────┘
```

---

## 3. Размещение объявления (Владелец)

### 3.1 Flow: Создание листинга

```
┌─────────────────┐
│ Tap "+"         │
│ (FAB кнопка)    │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│ Step 1: Фото    │
│ - Камера        │
│ - Галерея       │
│ (мин. 1, макс.10)│
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│ Step 2: Название│
│ и описание      │
│ - Название      │
│ - Описание      │
│ - Состояние     │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│ Step 3: Категория│
│ - Инструменты   │
│ - Спорт         │
│ - Электроника   │
│ - Детское       │
│ - Event         │
│ - Другое        │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│ Step 4: Цена    │
│ - Цена/день     │
│ - Залог (опц.)  │
│ AI-подсказка    │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│ Step 5: Условия │
│ - Мин. срок     │
│ - Макс. срок    │
│ - Самовывоз     │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│ Preview         │
│ (как видят др.) │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│ Tap "Опубликов."│
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│ Модерация       │
│ (авто + AI)     │
└────────┬────────┘
         │
    ┌────┴────┐
    │         │
    ▼         ▼
┌────────┐  ┌────────────┐
│ Passed │  │ Rejected   │
└───┬────┘  └─────┬──────┘
    │             │
    ▼             ▼
┌────────────┐  ┌────────────┐
│ Объявление │  │ Push с     │
│ опубликовано│  │ причиной   │
│ Push "Ваше │  │ отклонения │
│ объявление │  │ + Редактир.│
│ активно"   │  └────────────┘
└────────────┘
```

---

## 4. Процесс аренды

### 4.1 Flow: Передача вещи

```
┌─────────────────┐
│ Бронирование    │
│ подтверждено    │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│ Chat открывается│
│ автоматически   │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│ Договорённость  │
│ о времени/месте │
│ передачи        │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│ День передачи   │
│ Push-напоминание│
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│ Встреча         │
│ (физическая)    │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│ Осмотр вещи     │
│ арендатором     │
└────────┬────────┘
         │
    ┌────┴────┐
    │         │
    ▼         ▼
┌────────┐  ┌────────────┐
│ ОК     │  │ Проблема   │
└───┬────┘  └─────┬──────┘
    │             │
    ▼             ▼
┌────────────┐  ┌────────────┐
│ Tap        │  │ Открыть    │
│ "Принять"  │  │ спор       │
└─────┬──────┘  └────────────┘
      │
      ▼
┌─────────────────┐
│ Фото вещи       │
│ (обязательно)   │
└────────┬────────┘
      │
      ▼
┌─────────────────┐
│ Акт приёма      │
│ создан          │
│ автоматически   │
└────────┬────────┘
      │
      ▼
┌─────────────────┐
│ Статус: "В      │
│ аренде"         │
│ Таймер запущен  │
└─────────────────┘
```

### 4.2 Flow: Возврат вещи

```
┌─────────────────┐
│ День возврата   │
│ (или раньше)    │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│ Push обоим      │
│ "Напоминание    │
│ о возврате"     │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│ Встреча         │
│ (физическая)    │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│ Осмотр вещи     │
│ владельцем      │
└────────┬────────┘
         │
    ┌────┴────┐
    │         │
    ▼         ▼
┌────────┐  ┌────────────┐
│ ОК     │  │ Повреждение│
└───┬────┘  └─────┬──────┘
    │             │
    ▼             ▼
┌────────────┐  ┌────────────┐
│ Владелец   │  │ Открыть    │
│ подтверждает│  │ претензию  │
│ возврат    │  │ (с фото)   │
└─────┬──────┘  └─────┬──────┘
      │               │
      ▼               ▼
┌────────────┐  ┌────────────┐
│ Залог      │  │ Модератор  │
│ возвращён  │  │ решает     │
│ арендатору │  │ по залогу  │
└─────┬──────┘  └────────────┘
      │
      ▼
┌────────────┐
│ Деньги     │
│ переведены │
│ владельцу  │
└─────┬──────┘
      │
      ▼
┌────────────┐
│ Запрос     │
│ отзывов    │
│ (обоим)    │
└────────────┘
```

---

## 5. Управление (Owner Dashboard)

### 5.1 Flow: Обработка заявки

```
┌─────────────────┐
│ Push "Новая     │
│ заявка на       │
│ [Название]"     │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│ Tap на Push     │
│ → Экран заявки  │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│ Просмотр:       │
│ - Профиль рентера│
│ - Рейтинг       │
│ - Даты аренды   │
│ - Сумма         │
└────────┬────────┘
         │
    ┌────┴────────────┐
    │                 │
    ▼                 ▼
┌─────────┐     ┌─────────────┐
│Подтвердить│   │ Отклонить   │
└────┬────┘     └──────┬──────┘
     │                 │
     ▼                 ▼
┌─────────────┐  ┌─────────────┐
│ Chat        │  │ Причина     │
│ открывается │  │ (опционально)│
│ для связи   │  └──────┬──────┘
└─────────────┘         │
                        ▼
                 ┌─────────────┐
                 │ Рентер      │
                 │ получает    │
                 │ возврат     │
                 └─────────────┘
```

---

## 6. Споры и поддержка

### 6.1 Flow: Открытие спора

```
┌─────────────────┐
│ Проблема        │
│ возникла        │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│ Tap "Открыть    │
│ спор" в         │
│ транзакции      │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│ Выбор типа      │
│ проблемы:       │
│ - Не соответств.│
│ - Повреждение   │
│ - No-show       │
│ - Другое        │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│ Описание        │
│ проблемы        │
│ (текст)         │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│ Прикрепить      │
│ доказательства  │
│ (фото/скрины)   │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│ Отправить       │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│ Уведомление     │
│ другой стороне  │
│ (48ч на ответ)  │
└────────┬────────┘
         │
    ┌────┴────────────┐
    │                 │
    ▼                 ▼
┌─────────────┐  ┌─────────────┐
│ Согласие    │  │ Несогласие  │
│ (урегулир.) │  │ → Модератор │
└──────┬──────┘  └──────┬──────┘
       │                │
       ▼                ▼
┌─────────────┐  ┌─────────────┐
│ Авто-решение│  │ Manual      │
│ по согласию │  │ review      │
└─────────────┘  │ (до 5 дней) │
                 └──────┬──────┘
                        │
                        ▼
                 ┌─────────────┐
                 │ Решение     │
                 │ + уведомл.  │
                 │ обеим       │
                 └─────────────┘
```

---

## 7. Уведомления и коммуникации

### 7.1 Flow: Push-уведомления

```
┌─────────────────────────────────────────────────────┐
│                    PUSH TRIGGERS                     │
├─────────────────────────────────────────────────────┤
│                                                     │
│  Арендатор:                                         │
│  ┌─────────────┐ ┌─────────────┐ ┌─────────────┐   │
│  │ Заявка      │ │ Заявка      │ │ Напоминание │   │
│  │ подтверждена│ │ отклонена   │ │ о возврате  │   │
│  └─────────────┘ └─────────────┘ └─────────────┘   │
│                                                     │
│  ┌─────────────┐ ┌─────────────┐ ┌─────────────┐   │
│  │ Залог       │ │ Новое       │ │ Отзыв       │   │
│  │ возвращён   │ │ сообщение   │ │ получен     │   │
│  └─────────────┘ └─────────────┘ └─────────────┘   │
│                                                     │
│  Владелец:                                          │
│  ┌─────────────┐ ┌─────────────┐ ┌─────────────┐   │
│  │ Новая       │ │ Вещь        │ │ Выплата     │   │
│  │ заявка      │ │ возвращена  │ │ получена    │   │
│  └─────────────┘ └─────────────┘ └─────────────┘   │
│                                                     │
│  ┌─────────────┐ ┌─────────────┐ ┌─────────────┐   │
│  │ Новое       │ │ Спор открыт │ │ Объявление  │   │
│  │ сообщение   │ │             │ │ модерировано│   │
│  └─────────────┘ └─────────────┘ └─────────────┘   │
│                                                     │
└─────────────────────────────────────────────────────┘
```

---

## 8. Профиль и настройки

### 8.1 Flow: Редактирование профиля

```
┌─────────────────┐
│ Tap на аватар   │
│ → Профиль       │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│ Профиль:        │
│ - Фото          │
│ - Имя           │
│ - ЖК            │
│ - Рейтинг       │
│ - Статистика    │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│ Tap "Редактир." │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│ Изменение:      │
│ - Фото          │
│ - Имя           │
│ - Адрес (*)     │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│ Tap "Сохранить" │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│ Данные обновлены│
└─────────────────┘

(*) Смена адреса требует
    повторной верификации
```

---

## 9. Финансы

### 9.1 Flow: Вывод средств (Owner)

```
┌─────────────────┐
│ Профиль →       │
│ "Мои финансы"   │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│ Баланс: X₽      │
│ Доступно: Y₽    │
│ В ожидании: Z₽  │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│ Tap "Вывести"   │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│ Сумма вывода    │
│ (мин. 100₽)     │
└────────┬────────┘
         │
         ▼
┌─────────────────┐     ┌─────────────────┐
│ Способ вывода   │     │ + Добавить      │
│ (сохранённые)   │────▶│ новую карту     │
└────────┬────────┘     └─────────────────┘
         │
         ▼
┌─────────────────┐
│ Подтверждение   │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│ Заявка создана  │
│ Срок: 1-3 р.дня │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│ Push: "Выплата  │
│ X₽ выполнена"   │
└─────────────────┘
```

---

## Приложения

### A. Легенда диаграмм

```
┌─────────────────┐
│ Экран/состояние │  — Прямоугольник: экран или состояние
└─────────────────┘

┌─────────────────┐
│ Решение?        │  — С вопросом: точка принятия решения
└─────────────────┘

         │
         ▼           — Стрелка: направление потока

    ┌────┴────┐
    │         │      — Ветвление: альтернативные пути
    ▼         ▼
```

### B. Связь с User Stories

| Flow | User Stories |
|------|--------------|
| Онбординг | US-001, US-002 |
| Поиск | US-003, US-004, US-005 |
| Бронирование | US-006, US-007, US-008 |
| Создание листинга | US-009, US-010, US-011 |
| Передача | US-014, US-015 |
| Возврат | US-016, US-017 |
| Споры | US-022, US-023, US-024 |

### C. Edge Cases

| Сценарий | Обработка |
|----------|-----------|
| Потеря сети при оплате | Сохранение состояния, retry |
| Отмена в процессе заполнения | Сохранение черновика |
| Таймаут подтверждения (24ч) | Авто-отмена + возврат |
| Спор без ответа (48ч) | Эскалация к модератору |

---

*Документ создан: UX Agent | Дата: 2025-02-05*
